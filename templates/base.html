{% extends "index.html" %}
{% load static %}
{% block css %}
  <link href="{% static "base.css" %}" rel="stylesheet">
{% endblock %}
{% block page_title %}
  <div class="post__title">
    {% if user.is_authenticated %}
      <a href="{% url "app:blog_create" %}">
        <button type="button" class="btn btn-width">Create</button>
      </a>
    {% endif %}
  </div>
{% endblock %}
{% block page_content %}
  {% block posts %}
    {% for post in posts %}
      <div class="postcard">
        <h3 class="postcard__title">{{ post.title }}</h3>
        <div class="postcard__stats">
          <div class="postcard__date">{{ post.created_on.date }}</div>
          <div class="postcard__likes">
            <img class="postcard__likes-icon" src="{% static "like.svg" %}" alt="like">
            <span class="postcard__likes-count">{{ post.likes }}</span>
          </div>
        </div>
        <div class="postcard__body">
          <p>{{ post.body | slice:":120" }}...</p>
        </div>
        <div class="postcard__categories">
          {% for category in post.categories.all %}
            <div class="postcard__category">
              <a class="postcard__category-name"
                 href="{% url 'app:blog_category' category.name %}">{{ category.name }}</a>
            </div>
          {% endfor %}
        </div>
        <div class="postcard__detail">
          <h5>
            <a href="{% url 'app:blog_detail' post.pk %}">Read Full Blog</a>
          </h5>
        </div>
      </div>
    {% endfor %}
  {% endblock posts %}
{% endblock page_content %}
